Facebook chat
(1)http://usefulstuff.io/2013/03/how-it-works-facebook-part-2/
Chat is based on an Epoll server developed in Erlang and accessed using Thrift and there is also a subsystem for logging chat messages (in C++). Both subsystems are clustered and partitioned for reliability and efficient failover.

Real-time presence notification is the most resource-intensive operation performed (not sending messages): keeping each online user aware of the online-idle-offline states of their friends. Real-time messaging is done using a variation of Comet, specifically XHR long polling, and/or BOSH.
(2)https://www.facebook.com/note.php?note_id=14218138919
(3)https://www.facebook.com/notes/facebook-engineering/chat-stability-and-scalability/51412338919
(4)http://www.cnblogs.com/piaoger/archive/2012/08/19/2646530.html